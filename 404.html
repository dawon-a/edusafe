<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="robots" content="noindex" />
  <title>Redirecting…</title>
  <style>
    /* 간단한 로딩 메시지 스타일 (선택) */
    body { font-family: -apple-system, BlinkMacSystemFont, "나눔고딕", "Malgun Gothic", "Segoe UI", Roboto, sans-serif; margin: 40px; color:#222; }
    .wrap { max-width:640px; }
    .small { color:#666; font-size:0.9rem; margin-top:8px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>잠시만요 — 페이지로 이동합니다.</h1>
    <div id="msg" class="small">주소를 확인중입니다...</div>
  </div>

<script>
(function(){
  // --- 여기에 한글 별칭(또는 여러 경로)을 추가하세요 ---
  // 왼쪽 키: 요청된 path의 첫 부분(디코딩 후, 슬래시 없이)
  // 오른쪽 값: 실제로 보여줄 경로(여기선 /edusafe 로 설정)
  const aliasMap = {
    "교육안전": "/edusafe",
    "학교안전": "/edusafe",
    "시설안전": "/edusafe",
    "교육평가": "/edusafe",
    "교육시설": "/edusafe"
    // 필요하면 더 추가하세요.
  };

  const msgEl = document.getElementById('msg');

  // 현재 요청 경로 예: "/교육안전/세부" 또는 "/교육안전"
  const rawPath = decodeURIComponent(location.pathname || "/");
  // 첫 경로 세그먼트(맨 앞 슬래시 제거 후 첫 부분)
  const firstSegment = (rawPath.replace(/^\/+/, "").split("/")[0] || "").trim();

  if (!firstSegment) {
    msgEl.textContent = "기본 페이지로 이동합니다…";
    // 빈 경로는 root index로 보낼 수도 있음. 여기선 edusafe로 보냄.
    location.replace("/edusafe" + location.search + location.hash);
    return;
  }

  // 대소문자/공백/인코딩 차이에 대비 (한글은 대소문자 무관)
  const key = firstSegment;

  if (aliasMap.hasOwnProperty(key)) {
    const targetBase = aliasMap[key];
    // 원래 경로의 나머지 부분(별칭 뒤에 오는 경로)이 있으면 합쳐서 보존
    const remainder = rawPath.replace(new RegExp("^/" + escapeRegExp(key)), "");
    const target = targetBase + remainder + location.search + location.hash;
    msgEl.textContent = `별칭 "${key}" → ${target} 로 이동합니다.`;
    // location.replace를 사용해 브라우저 히스토리 뒤지지 않게 함
    location.replace(target);
  } else {
    // 별칭에 없으면 /edusafe로 이동하거나 404 안내를 보여주기
    msgEl.innerHTML = `알 수 없는 별칭 "${key}" 입니다. <br>기본 페이지로 이동합니다.`;
    setTimeout(function(){
      location.replace("/edusafe" + location.search + location.hash);
    }, 800);
  }

  // 유틸: RegExp escape
  function escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  }

})();
</script>
</body>
</html>
